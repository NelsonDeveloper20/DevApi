2024-04-03 10:40:08,860 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2024-04-03 10:40:08,885 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2024-04-03 10:40:08,887 [1] INFO Microsoft.Hosting.Lifetime - Content root path: C:\Users\NelsonR\Documents\PROYECTOS\WORKFLOW\Proyecto Git\WorkFlowGrupoPana\WorkFlowGP.ApiRest\JLR.GP.Orders\
2024-04-03 10:56:19,527 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 10:56:19,525 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 10:56:19,566 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIwOTcxNjgsIm5iZiI6MTcxMjA5NzE2OCwiZXhwIjoxNzEyMTAxMDY4LCJhaW8iOiJBVVFBdS84V0FBQUFmT2VVL1pyKzdhNE9sL0J5ckZHY3Zod1hTQWNkMXI2UEZmM2draUpLRVRDUDVjOEM1TTQ2blJnTmVkY2pEeGFyMm95ejZBOEduVkl3WUkxOUI1Ti9YUT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJoMGJCN25TVWMwQ2t1emx5Y201QUFBIiwidmVyIjoiMi4wIn0.eI1KPedcS-AItpc0EsB367cD1sLRo0ahdMw-ssoLO9_fbcByIiLPR_vlT_FSonjGH_YvrtrjVCnErkH1GiTOroTlDZ3MRjru-Pg8nQg0iI4vvsCrp822JoYli66C6yqi8n8UICJLxgCHWhp8Z07GkhaD2Hrmq-dpCm8hXqXWwZOqKpRoL68e69WUPg8abYiNqFeeyu09KRRFp2iaNDtDA-0ITVDLcYcSTY8eoAyMFYdQgwgWwBVp4m1NFddZ-_UtjqZvpPFqDdSFi-8_mmb3mtjCylYkKydYPioLfZF0sz9ck25I3908s27UaEyrSzUe69cqruJO1cwDZcQsjqgvBw
2024-04-03 10:56:19,568 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 10:56:19,994 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 10:56:19,994 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 10:56:21,259 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 10:56:21,259 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 10:56:24,350 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (429ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 10:56:24,516 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 10:56:24,608 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNTk3ODQsImV4cCI6MTcxMjE2MzM4NCwiaWF0IjoxNzEyMTU5Nzg0LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.gvHeYZRfCF2uiDV8mjPT0DuUIgq4mvJ9X4wP_lCpeGE
2024-04-03 10:56:24,611 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNTk3ODQsImV4cCI6MTcxMjE2MzM4NCwiaWF0IjoxNzEyMTU5Nzg0LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.gvHeYZRfCF2uiDV8mjPT0DuUIgq4mvJ9X4wP_lCpeGE
2024-04-03 10:56:24,614 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: bkq5m4RRwdEwTM1hSz+0OeGuFE0ryO9Je/tUIoGF9Zk=
2024-04-03 10:56:24,615 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 3i4A6v6b5dxJ+5iUckAIEp+5J11xCSxr5i7EYTlYOqg=
2024-04-03 10:56:24,792 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 10:56:24,796 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 10:56:24,964 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 10:56:24,967 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 10:56:25,405 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 10:56:25,568 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 10:56:25,736 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (467ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 10:56:26,081 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (153ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 10:56:26,431 [.NET ThreadPool Worker] ERROR ApiPortal_DataLake.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at ApiPortal_DataLake.Domain.Services.AuthService.GetToken(String tokenAD) in C:\\Users\\NelsonR\\Documents\\PROYECTOS\\WORKFLOW\\Proyecto Git\\WorkFlowGrupoPana\\WorkFlowGP.ApiRest\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 106","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2024-04-03 11:07:21,173 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 11:07:21,182 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 11:07:21,198 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 11:07:21,355 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 11:07:22,181 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (174ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 11:07:22,199 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNjA0NDIsImV4cCI6MTcxMjE2NDA0MiwiaWF0IjoxNzEyMTYwNDQyLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.IwxkranLzRNJq6oUr5wVxl7eLgDfArXCROq7TBJn2sw
2024-04-03 11:07:22,201 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 3CFiZFSrnepeTAOD/Bg+gE4plj1bE6lKyxG+icTSzLY=
2024-04-03 11:07:22,341 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (134ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 11:07:22,480 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 11:07:22,765 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (134ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 11:07:22,905 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 11:07:23,192 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 11:15:16,049 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 11:15:16,075 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 11:15:16,136 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 11:15:16,232 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 11:15:18,168 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (177ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 11:15:18,368 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNjA5MTgsImV4cCI6MTcxMjE2NDUxOCwiaWF0IjoxNzEyMTYwOTE4LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.Zsfo2AxoDls-p59ayfZJm_PMmWkLjmazPYNYEIa6t-w
2024-04-03 11:15:18,373 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: MJHpzFQoePuugR0YNeeJ31k/g4NQ16s+XY8nvEI9tyk=
2024-04-03 11:15:18,550 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (150ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 11:15:18,731 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (147ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 11:15:19,037 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 11:15:19,214 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (162ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 11:15:19,565 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (158ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 11:54:11,232 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 11:54:11,264 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 11:54:11,337 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 11:54:11,545 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 11:54:12,968 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (143ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 11:54:13,014 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNjMyNTIsImV4cCI6MTcxMjE2Njg1MiwiaWF0IjoxNzEyMTYzMjUyLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.IjYuBOUskP0U0qg5PciQ9dRLl-KJEidJiX5Z9puTtD0
2024-04-03 11:54:13,020 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: g9vLLqFw8MAv+QNUmjoniRcXz+EkN1g6g7Z7547Uw4g=
2024-04-03 11:54:13,163 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 11:54:13,320 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (143ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 11:54:13,771 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (146ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 11:54:14,013 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 11:54:14,551 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 11:57:58,394 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 11:57:58,407 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 11:57:58,427 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 11:57:58,489 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 11:57:58,696 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (151ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 11:57:58,721 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNjM0NzgsImV4cCI6MTcxMjE2NzA3OCwiaWF0IjoxNzEyMTYzNDc4LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.onf3MEZt9lEJufPo5JJ3OfUTFoBp55mGlea6dzzJDpw
2024-04-03 11:57:58,725 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: oSZgoz8hhBIilb8YXEC91l1FZ7OApf7Tx2EF7aEzvgQ=
2024-04-03 11:57:58,867 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 11:57:59,013 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 11:57:59,318 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 11:57:59,472 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (143ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 11:57:59,768 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:21:00,088 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:21:00,099 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNTk0NzcsIm5iZiI6MTcxMjE1OTQ3NywiZXhwIjoxNzEyMTYzMzc3LCJhaW8iOiJBVVFBdS84V0FBQUE4SU9oQTU4ODY1YUloR2UzL0NGR1hvVGpiWk4xSXRvNHNLYmc1Mm9HMWc5dmJob3hmUVhJSEJsdUZ0ZWo1UG5UMGtaOGJNdUVGSEg2dy9TZ08yN0RSQT09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJyb1lWTmVxRWswR3FoSHN1S3hOeUFBIiwidmVyIjoiMi4wIn0.0iWDXwjPxd06ETL-MryJ60VVFUnqyuLWc06Zhq5Do2cli-dD1qS760bP9HeSO30J31kABLX4lmlTZrg5RFykl-0IZcC4CbgL9nlPBXNpnw3upRvc4qnTDzd2t4SO8oPaBTCeiE0wZj1G0k2NKI-g_2ejzHvS512wuAFg7EB5Z0woqMO0VOt5pl4PeIm2lEzdkWGq9H0UyO0HNiWmQq_aEPX_RIqtXXH1Jlnb_Ktz2VgYsd97rR-ZfmTabklZsL9DXfaWZYsvPlSdMerAgancFN1KpCFltdEwOjcRJrfuKJ_6dj5zon-DGya8K9pUJeUaWYf9fcPqQdkYkY1yOGlQsw
2024-04-03 14:21:00,123 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:21:00,221 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:21:01,001 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:21:01,026 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzIwNjEsImV4cCI6MTcxMjE3NTY2MSwiaWF0IjoxNzEyMTcyMDYxLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.E5ll2p39RPSKkHhAiQpAUMQdVomxZvN8R9hIub_MmqU
2024-04-03 14:21:01,029 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 3qWPRAXfR018FNsqheYLHziMvPQHjYCi5twWjUzhjNk=
2024-04-03 14:21:01,171 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:21:01,308 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (134ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:21:01,587 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:21:01,739 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:21:02,018 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (133ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:24:30,896 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:24:30,907 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:24:30,936 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:24:30,990 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:24:31,165 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (145ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:24:31,182 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzIyNzEsImV4cCI6MTcxMjE3NTg3MSwiaWF0IjoxNzEyMTcyMjcxLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.A8FWCwDW3FinhfqNe45GbJ3KapUm2lgMUVwi_zKx05Y
2024-04-03 14:24:31,185 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: KKW1fHm2jrTZesWnkFa26WS/KzbK69YWv7Oo/Su1fvk=
2024-04-03 14:24:31,320 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (130ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:24:31,456 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (131ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:24:31,733 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (130ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:24:31,868 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (132ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:24:32,147 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (131ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:32:08,005 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:32:08,014 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:32:08,037 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:32:08,106 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:32:08,930 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (151ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:32:08,950 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzI3MjgsImV4cCI6MTcxMjE3NjMyOCwiaWF0IjoxNzEyMTcyNzI4LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.6fSuQGaQW77wNSrNVlcF6HhCsHmwYcONkJ3mlJxot-U
2024-04-03 14:32:08,953 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: AQDY/swi4VvXxgdzA1634nGaiMrjIs1mVG9O7jJ/MGs=
2024-04-03 14:32:09,095 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:32:09,291 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (148ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:32:09,694 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:32:09,842 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:32:10,139 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (145ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:34:42,098 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:34:42,107 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:34:42,133 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:34:42,204 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:34:42,421 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (151ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:34:42,487 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzI4ODIsImV4cCI6MTcxMjE3NjQ4MiwiaWF0IjoxNzEyMTcyODgyLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.7zxz_GXG4r4WLN0_G6ScWu5qNzvpOVc6p3hskozdqy4
2024-04-03 14:34:42,490 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 3GBZf+0/l/7mPYIdwlAiLdlOyK0NNsVOEeFjAizpzLw=
2024-04-03 14:34:42,646 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (144ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:34:42,787 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:34:43,077 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:34:43,219 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:34:43,515 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (142ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:35:35,677 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:35:35,681 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:35:35,686 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:35:35,692 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:35:35,839 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (141ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:35:35,864 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzI5MzUsImV4cCI6MTcxMjE3NjUzNSwiaWF0IjoxNzEyMTcyOTM1LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.h_DWSOdiYPCmObiWDNm-n920nXh80RoDNfJ181N3sqs
2024-04-03 14:35:35,866 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: OGmMulosyvGb9U/GJWEBiW8i+rcqdS56NZJQhyOR2ik=
2024-04-03 14:35:36,014 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (145ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:35:36,158 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:35:36,460 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (155ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:35:36,599 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:35:36,881 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:36:03,724 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:36:03,728 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:36:03,735 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:36:03,768 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:36:04,001 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (171ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:36:04,065 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzI5NjQsImV4cCI6MTcxMjE3NjU2NCwiaWF0IjoxNzEyMTcyOTY0LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.wz3frFT24EjKiovEw_yFd79byJgcODMSzzO7RA-9ZXI
2024-04-03 14:36:04,092 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 4j5mdSBbpD58BvfeerZvNaa/kD3sfpUpmGvK5nj/5Io=
2024-04-03 14:36:04,235 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:36:04,578 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (339ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:36:04,856 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:36:05,060 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (144ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:36:05,346 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:38:48,711 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:38:48,729 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:38:48,755 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:38:48,845 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:38:49,831 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (148ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:38:49,891 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzMxMjksImV4cCI6MTcxMjE3NjcyOSwiaWF0IjoxNzEyMTczMTI5LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.-GlV9cusZGwr5Ip4MQj_fJoomprHv6AJ0NV0QD3zEgU
2024-04-03 14:38:49,900 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: yDKZoQiJCC29CWCrk4/VQluXe5tbeZJaa64SIKak+jE=
2024-04-03 14:38:50,048 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (134ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:38:50,194 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:38:50,481 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:38:50,625 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:38:50,914 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:47:17,978 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:47:17,999 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:47:18,032 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:47:18,122 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:47:19,055 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (283ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:47:19,076 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzM2MzksImV4cCI6MTcxMjE3NzIzOSwiaWF0IjoxNzEyMTczNjM5LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.-M_h4cjCzCsqQwoNzdQZcjAfoMtTSOXMlyuyr8F3Ay8
2024-04-03 14:47:19,081 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: YCRnid7DOSczFgFf4+ztp50v9IpFDhjfL5t82t345rE=
2024-04-03 14:47:19,234 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (148ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:47:19,374 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:47:19,822 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (290ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:47:19,959 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (132ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:47:20,242 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 14:57:15,062 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 14:57:15,075 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 14:57:15,102 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 14:57:15,214 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 14:57:15,982 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (142ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 14:57:16,000 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzQyMzUsImV4cCI6MTcxMjE3NzgzNSwiaWF0IjoxNzEyMTc0MjM1LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.I9BrTKmuirQPXfMWTURknk9MdJvI3n57B-ydxTNRI6E
2024-04-03 14:57:16,003 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: /6naBC7+FlsAaVEYjFam0gB/hcl+gdwlRR/CxHDYtHc=
2024-04-03 14:57:16,145 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 14:57:16,286 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 14:57:16,587 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (146ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 14:57:16,738 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 14:57:17,033 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 15:00:03,491 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 15:00:03,505 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 15:00:03,546 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 15:00:03,652 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 15:00:03,882 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (148ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 15:00:03,912 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzQ0MDMsImV4cCI6MTcxMjE3ODAwMywiaWF0IjoxNzEyMTc0NDAzLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.m4mWOaIxZPyaZReg4h2wsxHPlPc4ygDISnl4kijTezQ
2024-04-03 15:00:03,916 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: +6DB3+cQAvEd5dSMmFBWdUk4xwt74tf55pW62lFovqU=
2024-04-03 15:00:04,062 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 15:00:04,205 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (135ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 15:00:04,588 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (227ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 15:00:04,794 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (190ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 15:00:05,342 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (314ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 15:02:27,701 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 15:02:27,718 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 15:02:27,742 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 15:02:27,869 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 15:02:28,158 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (182ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 15:02:28,191 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzQ1NDgsImV4cCI6MTcxMjE3ODE0OCwiaWF0IjoxNzEyMTc0NTQ4LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.RtJmIG02Ss2dINqA18yNYZfKXCpR2pi2VXA7B6RMYDw
2024-04-03 15:02:28,195 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: K0ympzuLG95SvYdKFPANS8SPy4nrIaV67EkrLOPbnAw=
2024-04-03 15:02:28,368 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (166ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 15:02:28,526 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (139ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 15:02:28,823 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 15:02:28,982 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (138ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 15:02:29,357 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (142ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 15:04:08,259 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 15:04:08,267 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 15:04:08,273 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 15:04:08,277 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 15:04:08,447 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (154ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 15:04:08,462 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzQ2NDgsImV4cCI6MTcxMjE3ODI0OCwiaWF0IjoxNzEyMTc0NjQ4LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.S2pIcAt2z4-oGzsgLWs8Qpk7zenca-_VY_XgfH7h1b4
2024-04-03 15:04:08,468 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: 40jkSXcCwfwPnyunlyom2ziX85HPCbB7SkOLVJdq5Ts=
2024-04-03 15:04:08,635 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (159ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 15:04:08,861 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (219ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 15:04:09,245 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (192ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 15:04:09,392 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 15:04:09,682 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (140ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 15:58:35,177 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 15:58:36,041 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (179ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM [Usuario] AS [u]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t].[Id] AS [Id1], [t].[Descripcion], [t].[Estado], [t].[FechaCreacion] AS [FechaCreacion0], [t].[FechaModificacion] AS [FechaModificacion0], [t].[UsuarioCreacion] AS [UsuarioCreacion0], [t0].[Id] AS [Id2], [t0].[Descripcion] AS [Descripcion0], [t0].[Estado] AS [Estado0], [t0].[FechaCreacion] AS [FechaCreacion1], [t0].[FechaModificacion] AS [FechaModificacion1], [t0].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t] ON [r].[IdUnidadNegocio] = [t].[Id]
    INNER JOIN [TblSede] AS [t0] ON [r].[IdSede] = [t0].[Id]
) AS [t1] ON [u].[Id] = [t1].[UsuarioId]
ORDER BY [u].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 16:11:15,572 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 16:11:15,599 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 16:11:15,668 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 16:11:15,675 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 16:11:15,680 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 16:11:16,496 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (146ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM [Usuario] AS [u]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t].[Id] AS [Id1], [t].[Descripcion], [t].[Estado], [t].[FechaCreacion] AS [FechaCreacion0], [t].[FechaModificacion] AS [FechaModificacion0], [t].[UsuarioCreacion] AS [UsuarioCreacion0], [t0].[Id] AS [Id2], [t0].[Descripcion] AS [Descripcion0], [t0].[Estado] AS [Estado0], [t0].[FechaCreacion] AS [FechaCreacion1], [t0].[FechaModificacion] AS [FechaModificacion1], [t0].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t] ON [r].[IdUnidadNegocio] = [t].[Id]
    INNER JOIN [TblSede] AS [t0] ON [r].[IdSede] = [t0].[Id]
) AS [t1] ON [u].[Id] = [t1].[UsuarioId]
ORDER BY [u].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 16:11:17,086 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 16:11:17,111 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzg2NzcsImV4cCI6MTcxMjE4MjI3NywiaWF0IjoxNzEyMTc4Njc3LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.9nGhWczjKunaWzjML0aGu3iNvT99nIJDZrcLT_S_8r8
2024-04-03 16:11:17,114 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: Vzc20cYXY+nxC79yLcz49zrUNqF2IAAVNWaxrZVu2FQ=
2024-04-03 16:11:17,285 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 16:11:17,420 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (131ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 16:11:17,694 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (129ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 16:11:17,840 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (129ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 16:11:18,127 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (145ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 16:11:20,139 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 16:11:20,141 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzE3NTksIm5iZiI6MTcxMjE3MTc1OSwiZXhwIjoxNzEyMTc1NjU5LCJhaW8iOiJBVVFBdS84V0FBQUFlUEtKWFhtbG9FUnhveHNzQXZIVUYrakdNbUpQMjFIcHZJS2JpTjRhalF1T3kxR1hlcGFwQ1BjaEVWcGtJREF2amFjWEVYWFBCNk83K1NtZTFsaVNRZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNWQyMGI0NTMtMmM3My00YjhiLTljYTUtZmU5M2Y0ZGIwMWY2Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ6VlZHcUxZNnRFQzVmYm5FczFXR0FBIiwidmVyIjoiMi4wIn0.QqvLclVO9mjt-43X5aW8mec5zwKfPFc8nw78N100sCBXSLGPNNjMGZXF97dPFjywN8GblQT1u6GyEw0FcwU_v7LuC0HIN-9ZtrqgqMFHo4ykPb_TCuID83rLNhIwK2gEZBJOKbII1F1GeY0d7qkusR0BUPGg9h0Ti4CnotOzHehTkDl3PbQObeHt2s2bfzABVXB5h8um369VLBSzzWVCn0GHz5UhKDSOnEMT2xoJHOzFPiJJxUPAeI2m_JtvRlQ7k_K6DZiKIAr2X3xIxxSmWnDM7_fVwe8FCwTEM4tNo-jYmZ2rgVNzMT_TfFIOAvuIrQxYB9SRk4NaIdPXXLQrMA
2024-04-03 16:11:20,147 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 16:11:20,152 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 16:11:20,295 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 16:11:20,305 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzg2ODAsImV4cCI6MTcxMjE4MjI4MCwiaWF0IjoxNzEyMTc4NjgwLCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.gLwDPqldYpxGY6BHgO-sPaLVmyJXa3RJ3Z_y1nHgmCA
2024-04-03 16:11:20,309 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: KD5rIXvoidu2osK25Hh0l9VVJh1yzJIGzqYJ93S214k=
2024-04-03 16:11:20,443 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (130ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 16:11:20,583 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (134ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 16:11:20,858 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (143ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 16:11:20,994 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (133ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 16:11:21,269 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (131ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
2024-04-03 16:21:33,604 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Application.Controllers.AuthController - Controller GetToken started
2024-04-03 16:21:33,624 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InEtMjNmYWxldlpoaEQzaG05Q1Fia1A1TVF5VSJ9.eyJhdWQiOiJlMTVhZjdhOS1mZTRjLTQ2MGUtYTUwMC04MmJiOGYxY2ZlZDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE3MTIxNzgzODAsIm5iZiI6MTcxMjE3ODM4MCwiZXhwIjoxNzEyMTgyMjgwLCJhaW8iOiJBVVFBdS84V0FBQUFFSDg0ckJKR1FpQlRzcWExQUt4YTFJSUV2TmdZT2QxSldYOFVzQUpMcHZwZjVCbm5hbEZZd0x0V245VEVKV0x2cStlejhlZFNKQUpnUzRtNzhQRzZSZz09IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOTU4M2Y5ODctYzhjNC00ZjEyLWI2MjAtMDc4ZjhhNTI2OGFkIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVnFuM1d1Rk1fZzVHcFFDQ3U0OGNfdFB0QUdBLiIsInN1YiI6ImVWc2JmcncxWk01LXlGSWFpbXZVWno4Y2lCbzZRRlE3eEs1RDlINUJwaXMiLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJMWGdkNGl4RmNFNnBjQUZGN2VwNUFBIiwidmVyIjoiMi4wIn0.rDsB_aklXrW6snLNaiH6xQnGov_Zar8dqFhJuZZ3wMCP4gWvozWiMduwTiKT8P0BOQP24AaFMHXBew7Cc88Iv6f_aZywkYt-azmLK5wo97MKHv1cCdfny-YFI701dWF66bvaKZy6NwqGUoOA-HLLLEWcgehljgdRZ-TOukgrNAEkxp186yUfJ1TvFaG6_Tj6UPAqubaELpyZgFLAtW8RMMM8Z-GCyhY05vz1I0kNIZoTqzbYGxlahUUeiKt3Ih0EvjSp0groyCb6az6vL8eaKYxg_etz945QfMxD0cibyzXCpFL6X75BU4Lz2lTvyrQP08va2bK-5PfDx-TGVit9gA
2024-04-03 16:21:33,661 [.NET ThreadPool Worker] WARN ApiPortal_DataLake.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2024-04-03 16:21:33,772 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2024-04-03 16:21:34,589 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (143ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[IdSede], [t0].[IdUnidadNegocio], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2024-04-03 16:21:34,616 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9BcGlQb3J0YWxfRGF0YUxha2UuY29tL2NsYWltcy9yb2wiOlsiMyIsIjIiLCI0IiwiNSIsIjYiLCI5IiwiOCIsIjciXSwiaHR0cDovL0FwaVBvcnRhbF9EYXRhTGFrZS5jb20vY2xhaW1zL3JvbG5hbWUiOlsiQURWIiwiQXNlc29yIiwiQ3VtcGxpbWllbnRvIiwiQ29udGFiaWxpZGFkIiwiSmVmYXR1cmEiLCJDb250YWJpbGlkYWQgRVBEUCIsIkdlcmVuY2lhIiwiVGVzb3JlcsOtYSJdLCJuYmYiOjE3MTIxNzkyOTQsImV4cCI6MTcxMjE4Mjg5NCwiaWF0IjoxNzEyMTc5Mjk0LCJpc3MiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmlzc3Vlci5jb20iLCJhdWQiOiJodHRwOi8vQXBpUG9ydGFsX0RhdGFMYWtlLmNvbSJ9.i7Uq_CKapUgtx_tbQKOWZ_W3y4u5SHhiHR7I-sU8rZY
2024-04-03 16:21:34,620 [.NET ThreadPool Worker] INFO ApiPortal_DataLake.Domain.Services.AuthService - GetToken refreshToken: sUd8+IkFGBfBEHOxOp+f47ocaht27NHPMZabco0tdAk=
2024-04-03 16:21:34,765 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (136ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-03 16:21:34,907 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2024-04-03 16:21:35,223 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (148ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2024-04-03 16:21:35,368 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (137ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-04-03 16:21:35,660 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (145ms) [Parameters=[@__usuario_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[IdUnidadNegocio], [t].[Nombre], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t1].[Id], [t1].[FechaCreacion], [t1].[FechaModificacion], [t1].[IdSede], [t1].[IdUnidadNegocio], [t1].[RolId], [t1].[UsuarioCreacion], [t1].[UsuarioId], [t1].[UsuarioModificacion], [t1].[Id0], [t1].[Nombre], [t1].[Id1], [t1].[Descripcion], [t1].[Estado], [t1].[FechaCreacion0], [t1].[FechaModificacion0], [t1].[UsuarioCreacion0], [t1].[Id2], [t1].[Descripcion0], [t1].[Estado0], [t1].[FechaCreacion1], [t1].[FechaModificacion1], [t1].[UsuarioCreacion1]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[IdUnidadNegocio], [u].[Nombre], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Id] = @__usuario_Id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[IdSede], [r].[IdUnidadNegocio], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre], [t0].[Id] AS [Id1], [t0].[Descripcion], [t0].[Estado], [t0].[FechaCreacion] AS [FechaCreacion0], [t0].[FechaModificacion] AS [FechaModificacion0], [t0].[UsuarioCreacion] AS [UsuarioCreacion0], [t2].[Id] AS [Id2], [t2].[Descripcion] AS [Descripcion0], [t2].[Estado] AS [Estado0], [t2].[FechaCreacion] AS [FechaCreacion1], [t2].[FechaModificacion] AS [FechaModificacion1], [t2].[UsuarioCreacion] AS [UsuarioCreacion1]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
    INNER JOIN [TblUnidadNegocio] AS [t0] ON [r].[IdUnidadNegocio] = [t0].[Id]
    INNER JOIN [TblSede] AS [t2] ON [r].[IdSede] = [t2].[Id]
) AS [t1] ON [t].[Id] = [t1].[UsuarioId]
ORDER BY [t].[Id], [t1].[Id], [t1].[Id0], [t1].[Id1]
