2022-12-01 16:11:46,792 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: https://localhost:7014
2022-12-01 16:11:46,834 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5014
2022-12-01 16:11:46,860 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2022-12-01 16:11:46,865 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2022-12-01 16:11:46,873 [1] INFO Microsoft.Hosting.Lifetime - Content root path: F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\
2022-12-01 16:13:17,567 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:17,565 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:17,606 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg4OTUsIm5iZiI6MTY2OTkyODg5NSwiZXhwIjoxNjY5OTMyNzk1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMmMxMzFkNTktNjUwOS00OWZlLThlZjktNDI1MzNiM2NlM2RhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJXWE5aWGdDMjlVaXJaQTYwa0o5aUFBIiwidmVyIjoiMi4wIn0.lu9_NI4syR4-XBIsUZc5iAJfG3s6sy8RR1Jn7CcbcbMSwvtH_TOXj7FIgJI_qwiz-ZdEndDP8W0OTYyM1RnraX8L8fmOPjn1z2NPKomgnEgtrYwoU9erRPVU0GYaBy3_DrsgYCFCoQZNabYjZV325maLIImyq7XOjWbiZYdziJOJqPgSfOZ2tBTIEk4SFV9Ho50DWKYEQcDSTbwBbVjdkszyB8M45gr3ap5f4cE2iIvfzZsFt1Ob0Wf1XdDUjRUyGqyAiOgZ2k1PWepxizIHuOPKkr4HkFAMSsy2Rb75WntjC11cVQC1-QHs-6Q7BTdDQcWVxz7FRHaeMUz6iSksZQ
2022-12-01 16:13:17,603 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg4OTUsIm5iZiI6MTY2OTkyODg5NSwiZXhwIjoxNjY5OTMyNzk1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMmMxMzFkNTktNjUwOS00OWZlLThlZjktNDI1MzNiM2NlM2RhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJXWE5aWGdDMjlVaXJaQTYwa0o5aUFBIiwidmVyIjoiMi4wIn0.lu9_NI4syR4-XBIsUZc5iAJfG3s6sy8RR1Jn7CcbcbMSwvtH_TOXj7FIgJI_qwiz-ZdEndDP8W0OTYyM1RnraX8L8fmOPjn1z2NPKomgnEgtrYwoU9erRPVU0GYaBy3_DrsgYCFCoQZNabYjZV325maLIImyq7XOjWbiZYdziJOJqPgSfOZ2tBTIEk4SFV9Ho50DWKYEQcDSTbwBbVjdkszyB8M45gr3ap5f4cE2iIvfzZsFt1Ob0Wf1XdDUjRUyGqyAiOgZ2k1PWepxizIHuOPKkr4HkFAMSsy2Rb75WntjC11cVQC1-QHs-6Q7BTdDQcWVxz7FRHaeMUz6iSksZQ
2022-12-01 16:13:18,563 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.    at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:13:18,611 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:18,616 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg4OTUsIm5iZiI6MTY2OTkyODg5NSwiZXhwIjoxNjY5OTMyNzk1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMmMxMzFkNTktNjUwOS00OWZlLThlZjktNDI1MzNiM2NlM2RhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJXWE5aWGdDMjlVaXJaQTYwa0o5aUFBIiwidmVyIjoiMi4wIn0.lu9_NI4syR4-XBIsUZc5iAJfG3s6sy8RR1Jn7CcbcbMSwvtH_TOXj7FIgJI_qwiz-ZdEndDP8W0OTYyM1RnraX8L8fmOPjn1z2NPKomgnEgtrYwoU9erRPVU0GYaBy3_DrsgYCFCoQZNabYjZV325maLIImyq7XOjWbiZYdziJOJqPgSfOZ2tBTIEk4SFV9Ho50DWKYEQcDSTbwBbVjdkszyB8M45gr3ap5f4cE2iIvfzZsFt1Ob0Wf1XdDUjRUyGqyAiOgZ2k1PWepxizIHuOPKkr4HkFAMSsy2Rb75WntjC11cVQC1-QHs-6Q7BTdDQcWVxz7FRHaeMUz6iSksZQ
2022-12-01 16:13:20,605 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:20,605 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:20,738 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:22,122 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:22,122 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:22,122 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:22,122 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:32,528 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,807ms) [Parameters=[@__refreshTokenRequest_RefreshToken_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[RefreshToken] = @__refreshTokenRequest_RefreshToken_0
2022-12-01 16:13:32,572 [.NET ThreadPool Worker] WARN JLR.GP.Orders.Domain.Services.AuthService - GetRefreshToken : Invalid access token or refresh token Wrmyu0niVJ9roEKk4eZcweyPo8r2be13vlGxON8+1AU=
2022-12-01 16:13:33,656 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (536ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:33,661 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (548ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:34,037 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMTMsImV4cCI6MTY2OTkzMjgxMywiaWF0IjoxNjY5OTI5MjEzLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.CxLig2hcNtN30H6mzRLcO9MXkgqRx7uNX-lgSpElAJM
2022-12-01 16:13:34,054 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMTMsImV4cCI6MTY2OTkzMjgxMywiaWF0IjoxNjY5OTI5MjEzLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.CxLig2hcNtN30H6mzRLcO9MXkgqRx7uNX-lgSpElAJM
2022-12-01 16:13:34,076 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 2kH3FzAlN0QNaGBoNoBs8GAQVNuYO2armcfXW6qfgkY=
2022-12-01 16:13:34,093 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: toU9vv3Ikv3JpkT2bMJ7VIyPzDSiHSdcVEimYs8y9TI=
2022-12-01 16:13:34,579 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (435ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:34,583 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (439ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:34,980 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (373ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:35,012 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (379ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:35,222 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (294ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:35,274 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMTUsImV4cCI6MTY2OTkzMjgxNSwiaWF0IjoxNjY5OTI5MjE1LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.y_ooT7tw49Hq7WVGoJTC0UK6VqWqH5XdiFoFWrkYgEI
2022-12-01 16:13:35,285 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 6bwVmwac9MbNnZmyaeVoEEdFveBUefu0+uiUL6Vmdxs=
2022-12-01 16:13:35,670 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (376ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:36,076 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (400ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:36,287 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (417ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:36,453 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:36,470 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:36,488 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg4OTUsIm5iZiI6MTY2OTkyODg5NSwiZXhwIjoxNjY5OTMyNzk1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMmMxMzFkNTktNjUwOS00OWZlLThlZjktNDI1MzNiM2NlM2RhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJXWE5aWGdDMjlVaXJaQTYwa0o5aUFBIiwidmVyIjoiMi4wIn0.lu9_NI4syR4-XBIsUZc5iAJfG3s6sy8RR1Jn7CcbcbMSwvtH_TOXj7FIgJI_qwiz-ZdEndDP8W0OTYyM1RnraX8L8fmOPjn1z2NPKomgnEgtrYwoU9erRPVU0GYaBy3_DrsgYCFCoQZNabYjZV325maLIImyq7XOjWbiZYdziJOJqPgSfOZ2tBTIEk4SFV9Ho50DWKYEQcDSTbwBbVjdkszyB8M45gr3ap5f4cE2iIvfzZsFt1Ob0Wf1XdDUjRUyGqyAiOgZ2k1PWepxizIHuOPKkr4HkFAMSsy2Rb75WntjC11cVQC1-QHs-6Q7BTdDQcWVxz7FRHaeMUz6iSksZQ
2022-12-01 16:13:36,514 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg4OTUsIm5iZiI6MTY2OTkyODg5NSwiZXhwIjoxNjY5OTMyNzk1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMmMxMzFkNTktNjUwOS00OWZlLThlZjktNDI1MzNiM2NlM2RhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJXWE5aWGdDMjlVaXJaQTYwa0o5aUFBIiwidmVyIjoiMi4wIn0.lu9_NI4syR4-XBIsUZc5iAJfG3s6sy8RR1Jn7CcbcbMSwvtH_TOXj7FIgJI_qwiz-ZdEndDP8W0OTYyM1RnraX8L8fmOPjn1z2NPKomgnEgtrYwoU9erRPVU0GYaBy3_DrsgYCFCoQZNabYjZV325maLIImyq7XOjWbiZYdziJOJqPgSfOZ2tBTIEk4SFV9Ho50DWKYEQcDSTbwBbVjdkszyB8M45gr3ap5f4cE2iIvfzZsFt1Ob0Wf1XdDUjRUyGqyAiOgZ2k1PWepxizIHuOPKkr4HkFAMSsy2Rb75WntjC11cVQC1-QHs-6Q7BTdDQcWVxz7FRHaeMUz6iSksZQ
2022-12-01 16:13:36,901 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (572ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:37,306 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:37,313 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:37,317 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:37,323 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:37,515 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:37,520 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:37,550 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:37,562 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:37,586 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,665ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:37,950 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:38,002 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:38,065 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:38,069 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:38,240 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,701ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:38,568 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:38,606 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (599ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:38,614 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMTgsImV4cCI6MTY2OTkzMjgxOCwiaWF0IjoxNjY5OTI5MjE4LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.qjeCcT7M3VS3hTA8fac4FoPq--ASPPug3pxWfKxq7GA
2022-12-01 16:13:38,618 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: GHCZ1sr0d6elORUh40A8Mt3kdwIdFx5XhdlNBwwM0qk=
2022-12-01 16:13:38,974 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:39,151 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (505ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:39,431 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:39,434 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:39,733 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:39,736 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:39,897 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (740ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:40,105 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (666ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:40,113 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjAsImV4cCI6MTY2OTkzMjgyMCwiaWF0IjoxNjY5OTI5MjIwLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.gAMS60B8bpq_ttXh5onKDetVU8mZZWLYhmwiIjPzBmU
2022-12-01 16:13:40,118 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: hYsUXqbIKpGUeqz62P3RYzxZgvIW4CuBBdkX4FyMkC0=
2022-12-01 16:13:40,227 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:40,233 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:40,354 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (614ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:40,362 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjAsImV4cCI6MTY2OTkzMjgyMCwiaWF0IjoxNjY5OTI5MjIwLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.gAMS60B8bpq_ttXh5onKDetVU8mZZWLYhmwiIjPzBmU
2022-12-01 16:13:40,367 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: g3eYKsvt6niabZkpGw5qchYzXBco4FewuOPm3yFnN4s=
2022-12-01 16:13:40,598 [34] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:40,602 [34] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:40,700 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (578ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:40,978 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (606ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:41,115 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (614ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:41,611 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (489ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:42,120 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,395ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:42,154 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,117ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:42,158 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX12741: JWT: 'System.String' must have three segments (JWS) or five segments (JWE).    at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:13:42,186 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:42,196 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,617ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:42,203 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjIsImV4cCI6MTY2OTkzMjgyMiwiaWF0IjoxNjY5OTI5MjIyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.ABGDm2Op451LjQ5qdt0GAsGQ1iR6lIpAdL7e832YO9I
2022-12-01 16:13:42,207 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: iYLGueaqzx6BthwZLR7XFhR9LjnRnq3IDnUCTyFDNjQ=
2022-12-01 16:13:42,695 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (504ms) [Parameters=[@__refreshTokenRequest_RefreshToken_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[RefreshToken] = @__refreshTokenRequest_RefreshToken_0
2022-12-01 16:13:42,713 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (501ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:42,933 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (279ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:42,936 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (237ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:42,943 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjIsImV4cCI6MTY2OTkzMjgyMiwiaWF0IjoxNjY5OTI5MjIyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.ABGDm2Op451LjQ5qdt0GAsGQ1iR6lIpAdL7e832YO9I
2022-12-01 16:13:42,948 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: D8yZjiCo8Z55rCc7ujJoD6V++WEyYG+p9rzdeAph0jA=
2022-12-01 16:13:43,099 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (160ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:43,289 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (627ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:43,469 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (540ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:43,472 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (755ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:43,560 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:43,631 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (194ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:43,639 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjMsImV4cCI6MTY2OTkzMjgyMywiaWF0IjoxNjY5OTI5MjIzLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.IYecvaxcq9oQGMi9tMtKaRmDOmIt00jWEIRcfiExBwc
2022-12-01 16:13:43,645 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: /R/lS1efdfIB180yTWAcJsHTrOj39oxQJl/jFJ4FOZI=
2022-12-01 16:13:43,747 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (755ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:43,755 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetRefreshToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetRefreshToken(RefreshTokenRequest refreshTokenRequest) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 150","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:43,874 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (211ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:43,962 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (203ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:44,179 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (211ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:44,529 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (571ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:44,531 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (724ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:45,198 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (360ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:45,901 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (318ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:46,095 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:46,098 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:46,103 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:46,108 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MTUsIm5iZiI6MTY2OTkyODkxNSwiZXhwIjoxNjY5OTMyODE1LCJhaW8iOiJBVFFBeS84VEFBQUF2MzFsb1g4SVFHQzlGZXE3T0x1aTJqVk5Ga29TdVVabFM3dHVRTnBFUHQ4OG5ucjVuVm80cFo5Uis2Z2gxeFNaIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiMTkxYmU0ZmQtNDY1OS00ZGZjLWIzOTItNzdkMWUyMWI1MDBlIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJwaFZBUFZPYTVrZUNKdzZRb3c4UkFnIiwidmVyIjoiMi4wIn0.IBImG6NEaZgiwLwYWwHWcYn0hjMh4CawQDfE1hzG4aev5aOhB2KS1FyVWJxW6K0yk2MnXEGbfIWF8SvfZ0O5d9WXm5yy7lGukhGs1iqwlyCCo-dESvh2fsR7dYyRuBM9tvONS3Iq--7M3NWzV6PS91L9jEOlal6NXT8SHm2gmep_bEmRbXnBCzpHe_5MFBwvb6Rt9lEyo27G0vAlG5TPoeNvFel65pGSv_6wYbUikhH89IECFhsx0GrMrTt63QYVaB2bH1-RmO0QHKAQDl23Tg2fLA58Cy_zkilDINYOsQvhEWbpiSHWjR-7gBiHZZjdyECqjVgEHXefNieQiGq6XA
2022-12-01 16:13:46,118 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,285ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:46,522 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:46,866 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:46,870 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:13:46,874 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:46,884 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:13:47,098 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:47,105 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:13:47,116 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:13:47,121 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:13:47,303 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:47,314 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:47,391 [34] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:47,401 [34] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:47,617 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (297ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:47,623 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjcsImV4cCI6MTY2OTkzMjgyNywiaWF0IjoxNjY5OTI5MjI3LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.-wxyeMnvYaAYzYtqyY9iarXXFRfTEBb3h8uqmU0avHU
2022-12-01 16:13:47,630 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: IyBz0WPp8a7gmmxIpYkmvRmukaHpnblr5LbeaeAU9jE=
2022-12-01 16:13:47,719 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (287ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:48,429 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMjcsImV4cCI6MTY2OTkzMjgyNywiaWF0IjoxNjY5OTI5MjI3LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.-wxyeMnvYaAYzYtqyY9iarXXFRfTEBb3h8uqmU0avHU
2022-12-01 16:13:48,640 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (202ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:49,759 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:49,759 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:49,772 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: vo6YAFc0rlnsRCz/PI4muAPrfYhcXSkdYM4e7k0M5yo=
2022-12-01 16:13:49,778 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:49,784 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:49,802 [34] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:49,829 [34] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:49,830 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:13:49,839 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:50,106 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (333ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:50,116 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (323ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:50,120 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (328ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:50,139 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMzAsImV4cCI6MTY2OTkzMjgzMCwiaWF0IjoxNjY5OTI5MjMwLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.Zr8n8lfXQNg_aB3pZolkh5TfVDhAN72SiwoUCj5zYg0
2022-12-01 16:13:50,152 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 8heo/2836sienFzE0OiQzbv0CEkXA16ndvE2bU16HS0=
2022-12-01 16:13:50,165 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (326ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:50,200 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMzAsImV4cCI6MTY2OTkzMjgzMCwiaWF0IjoxNjY5OTI5MjMwLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.Zr8n8lfXQNg_aB3pZolkh5TfVDhAN72SiwoUCj5zYg0
2022-12-01 16:13:50,238 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 9QeUOgUUy3NfYPbi7N3wCouBUDmWI2qZeD1PEevP1gg=
2022-12-01 16:13:50,499 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (341ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:50,529 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (659ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:13:51,527 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (296ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:50,685 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (376ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:51,680 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,127ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:51,829 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyMzEsImV4cCI6MTY2OTkzMjgzMSwiaWF0IjoxNjY5OTI5MjMxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.euJrNgbBheBytPozsBXtjQYHhh8dQC2dJLvJpdorj18
2022-12-01 16:13:52,355 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: lV11QGQuown39LpZrU+x9SIZ4bY+Kb7ybtYrXGLp+3U=
2022-12-01 16:13:52,509 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (393ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:52,765 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,796ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:53,038 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (500ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:13:53,070 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,196ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:53,080 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,192ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:53,268 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:53,416 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX12741: JWT: 'System.String' must have three segments (JWS) or five segments (JWE).    at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:13:53,573 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:13:53,638 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (353ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:13:53,988 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (379ms) [Parameters=[@__refreshTokenRequest_RefreshToken_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[RefreshToken] = @__refreshTokenRequest_RefreshToken_0
2022-12-01 16:13:54,065 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (415ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:54,518 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (419ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:13:55,051 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,404ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:55,786 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:56,333 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,268ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:56,866 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,449ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:13:56,976 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:13:57,701 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetRefreshToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetRefreshToken(RefreshTokenRequest refreshTokenRequest) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 150","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:00,106 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:00,113 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:14:00,115 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:00,123 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MjQsIm5iZiI6MTY2OTkyODkyNCwiZXhwIjoxNjY5OTMyODI0LCJhaW8iOiJBVFFBeS84VEFBQUFxR0FYMHN6c2tVS2hiOU16ci8xOG80bjU1b3ZEeTJrRXFmUEZ2bUFkMlRlOFluZjFQTHZUZVlUb1lyL2pkYlNXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNzA0M2ZjMzYtNDdmZi00MTFlLTgxNTgtNWVjMTg3ZWFmNzY4Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJxeFlEcDlGNWRFU1hzb0RsdE1qc0FRIiwidmVyIjoiMi4wIn0.ueH5eFMr9fUFE-bu6aYE1mEVZ-BTyTXsMxlXIFldLGNNKO9XLhLRK_N3fgefRY304ToK5VMvJObZy2snXmWjlmhc9Gwg-vh2lh-fwHtEm-tuNHr_pBYP1bKvjpFDXN6F19JTgVeJ7MGSNCzkzrQwxN2_vMCK8_tdNqo5vTMq-z6z6T2h_JZ_TIHbmjzDaGGor_QlAicRNA6VtO3Qp5N7u_Ifux-xVx0nEDDd5z0959ELiODgnkJFFananAx7QORG-W0Q72UXdYYbtBJsIiVoIV-hoeKch2DNoocX6nLtbavUY3bNslVsjb3gq_vSsD0x8hWfZxLTp2--i4i1GH65mw
2022-12-01 16:14:00,922 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:00,929 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzgsIm5iZiI6MTY2OTkyODkzOCwiZXhwIjoxNjY5OTMyODM4LCJhaW8iOiJBVFFBeS84VEFBQUFPQktUL2ttaWNGRE9KUXdVdUxBNW5HQ0lieEs4akV4RmRBY0RPd2NrbkhSZWx1VGhnd2hDOGM4UEt0VTJ1alU0IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiY2RjNjZlZDItODIyYS00YjQwLTg4NTEtZmFmMzBjMjA4NDk0Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI2eVFMaUhIc1ZVdUhac1hydUtVVEFBIiwidmVyIjoiMi4wIn0.T0jTFy_r9rx0WnHPnUZNTuCrkoKPeQP89fPZYIjIpcnLuCz9t7bPD23CyO0aF-EH4GPVm1r5BLyirVYFKK-f_f5PsjmV_oMzXt4mGQDNqQwCJIiCkt3MqK0oxqWaY6VDZbizDoO8xIX6vO6ti7nxa0f4k7qObDc7tU9x8yeDLvijaLOdUwaaCq7Bzbvm88OLiUtyPkcH-W7ZqQwTikEqzNK2aTjBj9Da7DHpxjHrb168kJtea_Y_3Ys8JE2cbUssQEOXQVf6sBPKt-WpgmEnRmifDJUITSsdc7BAeKNI1KZjpG7S_Zts3RD5Bz3xHts0ozWtdMrAJb_LgjL1rnLFhg
2022-12-01 16:14:00,933 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:00,944 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzgsIm5iZiI6MTY2OTkyODkzOCwiZXhwIjoxNjY5OTMyODM4LCJhaW8iOiJBVFFBeS84VEFBQUFPQktUL2ttaWNGRE9KUXdVdUxBNW5HQ0lieEs4akV4RmRBY0RPd2NrbkhSZWx1VGhnd2hDOGM4UEt0VTJ1alU0IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiY2RjNjZlZDItODIyYS00YjQwLTg4NTEtZmFmMzBjMjA4NDk0Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI2eVFMaUhIc1ZVdUhac1hydUtVVEFBIiwidmVyIjoiMi4wIn0.T0jTFy_r9rx0WnHPnUZNTuCrkoKPeQP89fPZYIjIpcnLuCz9t7bPD23CyO0aF-EH4GPVm1r5BLyirVYFKK-f_f5PsjmV_oMzXt4mGQDNqQwCJIiCkt3MqK0oxqWaY6VDZbizDoO8xIX6vO6ti7nxa0f4k7qObDc7tU9x8yeDLvijaLOdUwaaCq7Bzbvm88OLiUtyPkcH-W7ZqQwTikEqzNK2aTjBj9Da7DHpxjHrb168kJtea_Y_3Ys8JE2cbUssQEOXQVf6sBPKt-WpgmEnRmifDJUITSsdc7BAeKNI1KZjpG7S_Zts3RD5Bz3xHts0ozWtdMrAJb_LgjL1rnLFhg
2022-12-01 16:14:01,222 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:01,229 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:01,356 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:01,360 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:01,669 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:01,671 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:01,718 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzksIm5iZiI6MTY2OTkyODkzOSwiZXhwIjoxNjY5OTMyODM5LCJhaW8iOiJBVFFBeS84VEFBQUFxQTB3NndZVkJKcHk5amZYTTBGOHFKWVZEUTFIM3JHY2VnU0k4cU9pN0duOHJyV0tTZjA2eFdFNFB5dWNQTUZtIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNjg0MDU1NDYtNjI5Yy00YjI4LTliNmQtMjMwZWU2YjY1MjUxIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJma3Fhd1lHa2gwdWYxZVJxbFBwbUFnIiwidmVyIjoiMi4wIn0.m3FcdfRi_uLrXwWL1zZmCFU3UCWi--U93-sVDNrEBtenhBd9XJFmwuuVgrivKlMmpfQ1I2HVr6O0qZ2X6JpdxDt7bIUUrIvIHTHEXl1SvqZEOs_05cqEsaVTvCliuU7B6NAGy7st1vwNlo8LAlKCHzEyDQDKqPwWZSR-HBZJ21nNnYF4FD1VgYMKg1ZZGE8PhQXS1lL8T9L3-hpQ0vjZmXqsZjZsTv0sz0LqC0jExlJXBel3qXPtuhXjS4Y8dY00a1hQciuYVKwU92REpGnAmcnjw_oZSNL6StnykOKrGkVfJ6qI7eUe6_ZNdPAfFuj3zOdf5wdJRugsvfECEzcCow
2022-12-01 16:14:01,723 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.    at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:14:01,725 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzksIm5iZiI6MTY2OTkyODkzOSwiZXhwIjoxNjY5OTMyODM5LCJhaW8iOiJBVFFBeS84VEFBQUFxQTB3NndZVkJKcHk5amZYTTBGOHFKWVZEUTFIM3JHY2VnU0k4cU9pN0duOHJyV0tTZjA2eFdFNFB5dWNQTUZtIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNjg0MDU1NDYtNjI5Yy00YjI4LTliNmQtMjMwZWU2YjY1MjUxIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJma3Fhd1lHa2gwdWYxZVJxbFBwbUFnIiwidmVyIjoiMi4wIn0.m3FcdfRi_uLrXwWL1zZmCFU3UCWi--U93-sVDNrEBtenhBd9XJFmwuuVgrivKlMmpfQ1I2HVr6O0qZ2X6JpdxDt7bIUUrIvIHTHEXl1SvqZEOs_05cqEsaVTvCliuU7B6NAGy7st1vwNlo8LAlKCHzEyDQDKqPwWZSR-HBZJ21nNnYF4FD1VgYMKg1ZZGE8PhQXS1lL8T9L3-hpQ0vjZmXqsZjZsTv0sz0LqC0jExlJXBel3qXPtuhXjS4Y8dY00a1hQciuYVKwU92REpGnAmcnjw_oZSNL6StnykOKrGkVfJ6qI7eUe6_ZNdPAfFuj3zOdf5wdJRugsvfECEzcCow
2022-12-01 16:14:01,765 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:01,769 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzksIm5iZiI6MTY2OTkyODkzOSwiZXhwIjoxNjY5OTMyODM5LCJhaW8iOiJBVFFBeS84VEFBQUFxQTB3NndZVkJKcHk5amZYTTBGOHFKWVZEUTFIM3JHY2VnU0k4cU9pN0duOHJyV0tTZjA2eFdFNFB5dWNQTUZtIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNjg0MDU1NDYtNjI5Yy00YjI4LTliNmQtMjMwZWU2YjY1MjUxIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJma3Fhd1lHa2gwdWYxZVJxbFBwbUFnIiwidmVyIjoiMi4wIn0.m3FcdfRi_uLrXwWL1zZmCFU3UCWi--U93-sVDNrEBtenhBd9XJFmwuuVgrivKlMmpfQ1I2HVr6O0qZ2X6JpdxDt7bIUUrIvIHTHEXl1SvqZEOs_05cqEsaVTvCliuU7B6NAGy7st1vwNlo8LAlKCHzEyDQDKqPwWZSR-HBZJ21nNnYF4FD1VgYMKg1ZZGE8PhQXS1lL8T9L3-hpQ0vjZmXqsZjZsTv0sz0LqC0jExlJXBel3qXPtuhXjS4Y8dY00a1hQciuYVKwU92REpGnAmcnjw_oZSNL6StnykOKrGkVfJ6qI7eUe6_ZNdPAfFuj3zOdf5wdJRugsvfECEzcCow
2022-12-01 16:14:01,772 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:01,881 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (643ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:01,889 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDEsImV4cCI6MTY2OTkzMjg0MSwiaWF0IjoxNjY5OTI5MjQxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.oFEezJY4sgZpkkw3Uj2tvQnXwN6aH9a_Z0H_HTvgwYE
2022-12-01 16:14:01,897 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: inyXLnqCm8Y1l6Lax7rF1/C8t41uPZ1ipupo2WyMyNM=
2022-12-01 16:14:01,985 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (620ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:01,992 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDEsImV4cCI6MTY2OTkzMjg0MSwiaWF0IjoxNjY5OTI5MjQxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.oFEezJY4sgZpkkw3Uj2tvQnXwN6aH9a_Z0H_HTvgwYE
2022-12-01 16:14:01,997 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: bOs0N/Dc06fLryJ01d41VST8rsEzO/dN6AXBdh8E4AM=
2022-12-01 16:14:02,233 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (450ms) [Parameters=[@__refreshTokenRequest_RefreshToken_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[RefreshToken] = @__refreshTokenRequest_RefreshToken_0
2022-12-01 16:14:02,238 [.NET ThreadPool Worker] WARN JLR.GP.Orders.Domain.Services.AuthService - GetRefreshToken : Invalid access token or refresh token u4V/8bBW8DypEZ+Bbm2b3AVXyo3aNRz14Gt5Kray5JI=
2022-12-01 16:14:02,324 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:02,342 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:02,371 [34] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:02,382 [34] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:02,419 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (513ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:02,532 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (529ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:02,741 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (387ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:02,747 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (359ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:02,751 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (324ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:02,754 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDIsImV4cCI6MTY2OTkzMjg0MiwiaWF0IjoxNjY5OTI5MjQyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.tcpvYDkm0jEctzbW44JyttX2ZGl6HW355rgYoqxCndQ
2022-12-01 16:14:02,765 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDIsImV4cCI6MTY2OTkzMjg0MiwiaWF0IjoxNjY5OTI5MjQyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.tcpvYDkm0jEctzbW44JyttX2ZGl6HW355rgYoqxCndQ
2022-12-01 16:14:02,769 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: MuGx4oxqRIpq/zZGchvbx2U+16VSRAROC/LoMXr/p4g=
2022-12-01 16:14:02,772 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: zcvXtWwX+m+LpKt6Shs076rSBJR+3iZEVDlzxjR05XA=
2022-12-01 16:14:02,831 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:02,835 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:02,914 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:02,930 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:02,958 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (409ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:03,000 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:03,013 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:03,118 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (341ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:03,123 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (341ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:03,777 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (331ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:04,046 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (309ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:04,070 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDQsImV4cCI6MTY2OTkzMjg0NCwiaWF0IjoxNjY5OTI5MjQ0LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.9glPTzBqNWGUv-TxGJCQT5uN7h14A4sOhnBShIKrsqA
2022-12-01 16:14:04,091 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: WFy3IAxe1lCIstcy2iMXb/sRzdLErqO+Iz5o/DgQACw=
2022-12-01 16:14:04,300 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (240ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:04,311 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (236ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:04,318 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (241ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:04,331 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDQsImV4cCI6MTY2OTkzMjg0NCwiaWF0IjoxNjY5OTI5MjQ0LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.9glPTzBqNWGUv-TxGJCQT5uN7h14A4sOhnBShIKrsqA
2022-12-01 16:14:04,339 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDQsImV4cCI6MTY2OTkzMjg0NCwiaWF0IjoxNjY5OTI5MjQ0LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.9glPTzBqNWGUv-TxGJCQT5uN7h14A4sOhnBShIKrsqA
2022-12-01 16:14:04,346 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: FX+6sw8u5gpGXduMJ+3XnZJqQBT2zgbT39Wp+SUOF4g=
2022-12-01 16:14:04,352 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: wn+dtWxtyPr6tVPMtiEfBTeW5EkuTVhgU7GV6SZ/I9k=
2022-12-01 16:14:04,498 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX12741: JWT: 'System.String' must have three segments (JWS) or five segments (JWE).    at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:14:04,501 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:04,510 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzgsIm5iZiI6MTY2OTkyODkzOCwiZXhwIjoxNjY5OTMyODM4LCJhaW8iOiJBVFFBeS84VEFBQUFPQktUL2ttaWNGRE9KUXdVdUxBNW5HQ0lieEs4akV4RmRBY0RPd2NrbkhSZWx1VGhnd2hDOGM4UEt0VTJ1alU0IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiY2RjNjZlZDItODIyYS00YjQwLTg4NTEtZmFmMzBjMjA4NDk0Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI2eVFMaUhIc1ZVdUhac1hydUtVVEFBIiwidmVyIjoiMi4wIn0.T0jTFy_r9rx0WnHPnUZNTuCrkoKPeQP89fPZYIjIpcnLuCz9t7bPD23CyO0aF-EH4GPVm1r5BLyirVYFKK-f_f5PsjmV_oMzXt4mGQDNqQwCJIiCkt3MqK0oxqWaY6VDZbizDoO8xIX6vO6ti7nxa0f4k7qObDc7tU9x8yeDLvijaLOdUwaaCq7Bzbvm88OLiUtyPkcH-W7ZqQwTikEqzNK2aTjBj9Da7DHpxjHrb168kJtea_Y_3Ys8JE2cbUssQEOXQVf6sBPKt-WpgmEnRmifDJUITSsdc7BAeKNI1KZjpG7S_Zts3RD5Bz3xHts0ozWtdMrAJb_LgjL1rnLFhg
2022-12-01 16:14:04,514 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:04,524 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzgsIm5iZiI6MTY2OTkyODkzOCwiZXhwIjoxNjY5OTMyODM4LCJhaW8iOiJBVFFBeS84VEFBQUFPQktUL2ttaWNGRE9KUXdVdUxBNW5HQ0lieEs4akV4RmRBY0RPd2NrbkhSZWx1VGhnd2hDOGM4UEt0VTJ1alU0IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiY2RjNjZlZDItODIyYS00YjQwLTg4NTEtZmFmMzBjMjA4NDk0Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI2eVFMaUhIc1ZVdUhac1hydUtVVEFBIiwidmVyIjoiMi4wIn0.T0jTFy_r9rx0WnHPnUZNTuCrkoKPeQP89fPZYIjIpcnLuCz9t7bPD23CyO0aF-EH4GPVm1r5BLyirVYFKK-f_f5PsjmV_oMzXt4mGQDNqQwCJIiCkt3MqK0oxqWaY6VDZbizDoO8xIX6vO6ti7nxa0f4k7qObDc7tU9x8yeDLvijaLOdUwaaCq7Bzbvm88OLiUtyPkcH-W7ZqQwTikEqzNK2aTjBj9Da7DHpxjHrb168kJtea_Y_3Ys8JE2cbUssQEOXQVf6sBPKt-WpgmEnRmifDJUITSsdc7BAeKNI1KZjpG7S_Zts3RD5Bz3xHts0ozWtdMrAJb_LgjL1rnLFhg
2022-12-01 16:14:04,857 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,020ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:04,868 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,699ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:04,873 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,733ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:04,899 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:04,917 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:04,939 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzksIm5iZiI6MTY2OTkyODkzOSwiZXhwIjoxNjY5OTMyODM5LCJhaW8iOiJBVFFBeS84VEFBQUFxQTB3NndZVkJKcHk5amZYTTBGOHFKWVZEUTFIM3JHY2VnU0k4cU9pN0duOHJyV0tTZjA2eFdFNFB5dWNQTUZtIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNjg0MDU1NDYtNjI5Yy00YjI4LTliNmQtMjMwZWU2YjY1MjUxIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJma3Fhd1lHa2gwdWYxZVJxbFBwbUFnIiwidmVyIjoiMi4wIn0.m3FcdfRi_uLrXwWL1zZmCFU3UCWi--U93-sVDNrEBtenhBd9XJFmwuuVgrivKlMmpfQ1I2HVr6O0qZ2X6JpdxDt7bIUUrIvIHTHEXl1SvqZEOs_05cqEsaVTvCliuU7B6NAGy7st1vwNlo8LAlKCHzEyDQDKqPwWZSR-HBZJ21nNnYF4FD1VgYMKg1ZZGE8PhQXS1lL8T9L3-hpQ0vjZmXqsZjZsTv0sz0LqC0jExlJXBel3qXPtuhXjS4Y8dY00a1hQciuYVKwU92REpGnAmcnjw_oZSNL6StnykOKrGkVfJ6qI7eUe6_ZNdPAfFuj3zOdf5wdJRugsvfECEzcCow
2022-12-01 16:14:04,950 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzksIm5iZiI6MTY2OTkyODkzOSwiZXhwIjoxNjY5OTMyODM5LCJhaW8iOiJBVFFBeS84VEFBQUFxQTB3NndZVkJKcHk5amZYTTBGOHFKWVZEUTFIM3JHY2VnU0k4cU9pN0duOHJyV0tTZjA2eFdFNFB5dWNQTUZtIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiNjg0MDU1NDYtNjI5Yy00YjI4LTliNmQtMjMwZWU2YjY1MjUxIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJma3Fhd1lHa2gwdWYxZVJxbFBwbUFnIiwidmVyIjoiMi4wIn0.m3FcdfRi_uLrXwWL1zZmCFU3UCWi--U93-sVDNrEBtenhBd9XJFmwuuVgrivKlMmpfQ1I2HVr6O0qZ2X6JpdxDt7bIUUrIvIHTHEXl1SvqZEOs_05cqEsaVTvCliuU7B6NAGy7st1vwNlo8LAlKCHzEyDQDKqPwWZSR-HBZJ21nNnYF4FD1VgYMKg1ZZGE8PhQXS1lL8T9L3-hpQ0vjZmXqsZjZsTv0sz0LqC0jExlJXBel3qXPtuhXjS4Y8dY00a1hQciuYVKwU92REpGnAmcnjw_oZSNL6StnykOKrGkVfJ6qI7eUe6_ZNdPAfFuj3zOdf5wdJRugsvfECEzcCow
2022-12-01 16:14:04,957 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:04,968 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5MzgsIm5iZiI6MTY2OTkyODkzOCwiZXhwIjoxNjY5OTMyODM4LCJhaW8iOiJBVFFBeS84VEFBQUFPQktUL2ttaWNGRE9KUXdVdUxBNW5HQ0lieEs4akV4RmRBY0RPd2NrbkhSZWx1VGhnd2hDOGM4UEt0VTJ1alU0IiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiY2RjNjZlZDItODIyYS00YjQwLTg4NTEtZmFmMzBjMjA4NDk0Iiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI2eVFMaUhIc1ZVdUhac1hydUtVVEFBIiwidmVyIjoiMi4wIn0.T0jTFy_r9rx0WnHPnUZNTuCrkoKPeQP89fPZYIjIpcnLuCz9t7bPD23CyO0aF-EH4GPVm1r5BLyirVYFKK-f_f5PsjmV_oMzXt4mGQDNqQwCJIiCkt3MqK0oxqWaY6VDZbizDoO8xIX6vO6ti7nxa0f4k7qObDc7tU9x8yeDLvijaLOdUwaaCq7Bzbvm88OLiUtyPkcH-W7ZqQwTikEqzNK2aTjBj9Da7DHpxjHrb168kJtea_Y_3Ys8JE2cbUssQEOXQVf6sBPKt-WpgmEnRmifDJUITSsdc7BAeKNI1KZjpG7S_Zts3RD5Bz3xHts0ozWtdMrAJb_LgjL1rnLFhg
2022-12-01 16:14:05,421 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,064ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:05,425 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,067ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:05,525 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:05,641 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:05,651 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:05,658 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:05,665 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:05,800 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:05,803 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:05,807 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:05,817 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:06,005 [14] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,011 [14] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:06,036 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (612ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:06,148 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,151 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:06,482 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,486 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:06,575 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,580 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:06,590 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (570ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:06,595 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (551ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:06,603 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDYsImV4cCI6MTY2OTkzMjg0NiwiaWF0IjoxNjY5OTI5MjQ2LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.NEYB0IAyzSsxVTIg8EkW-kF03qJmmxadtR9PWyFdYyM
2022-12-01 16:14:06,610 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: tRA0MtdhEzVpPWkW07Z0zIXunJHe4BpEYXXdhS20CxA=
2022-12-01 16:14:06,756 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,800 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:06,787 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (589ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:06,822 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDYsImV4cCI6MTY2OTkzMjg0NiwiaWF0IjoxNjY5OTI5MjQ2LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.NEYB0IAyzSsxVTIg8EkW-kF03qJmmxadtR9PWyFdYyM
2022-12-01 16:14:06,833 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 3wCVRsYFeaIJgWxg3HYNX8vsXfmFdcI97RYNir3AXS0=
2022-12-01 16:14:06,976 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:06,982 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:07,015 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,580ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:07,019 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,537ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:07,024 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,498ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:07,072 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (455ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:07,080 [34] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:07,085 [34] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:07,231 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (382ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:07,387 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:07,395 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:07,466 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:07,471 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:07,602 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,493ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:07,617 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:07,608 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (451ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:07,620 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (518ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:07,648 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDcsImV4cCI6MTY2OTkzMjg0NywiaWF0IjoxNjY5OTI5MjQ3LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.aCwJNxfnO4FmXw6kYygKq1w2yhyP7zEZWynv5yA-8tY
2022-12-01 16:14:07,655 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: XfYqcSihk+U1NbsD2xLS+BNkgAv/IO1SLF9p+WwbfyI=
2022-12-01 16:14:07,752 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (514ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:07,935 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (534ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:08,353 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (411ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:08,637 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (364ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:08,640 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (370ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:08,648 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDgsImV4cCI6MTY2OTkzMjg0OCwiaWF0IjoxNjY5OTI5MjQ4LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.NNrsa-DWHbuS8Eh72GQjQl16C6RNeXmEgT0zqAzO81k
2022-12-01 16:14:08,664 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,182ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:08,667 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNDgsImV4cCI6MTY2OTkzMjg0OCwiaWF0IjoxNjY5OTI5MjQ4LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.NNrsa-DWHbuS8Eh72GQjQl16C6RNeXmEgT0zqAzO81k
2022-12-01 16:14:08,671 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 6oe1bDSrG7OybHvZxBHPhSmj5H8sCooXxJgW+64Su5A=
2022-12-01 16:14:08,680 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: GoT4DYEB/KtfXRMmHJUBGGwnFtJdAcJEpdre+dEHpc8=
2022-12-01 16:14:09,040 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,313ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:09,047 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (796ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:09,051 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,340ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:09,058 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:09,556 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:09,575 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,301ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:09,980 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:09,998 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (760ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:10,003 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (428ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:10,013 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNTAsImV4cCI6MTY2OTkzMjg1MCwiaWF0IjoxNjY5OTI5MjUwLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.StOCKmuYFFRsgK0Gn5LyLHmKFow2h-gqmi0MOe15gK4
2022-12-01 16:14:10,023 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: EB3HLQriIrRjVGi1BJMasCxBq8w1ou2PbL5XjvKRIoU=
2022-12-01 16:14:11,008 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,433ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:11,016 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNTEsImV4cCI6MTY2OTkzMjg1MSwiaWF0IjoxNjY5OTI5MjUxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.F-RwN-XBFwrXBEbvcQU5xgDq3LPH6p_EdgWnBOk40Yc
2022-12-01 16:14:11,022 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: fb4fLeoElpqWEaYHM91A3dEBlgHuROmRATh/pln7eCA=
2022-12-01 16:14:12,030 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,452ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:12,040 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNTIsImV4cCI6MTY2OTkzMjg1MiwiaWF0IjoxNjY5OTI5MjUyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.whVfM5Y973nxVzscGaTZ7_G5D5665HhL-2_eL0yNqzg
2022-12-01 16:14:12,047 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: JW45bYLmdGjbHnru8VWSpWtwhHXdD8fql6UELFeMe/k=
2022-12-01 16:14:12,539 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,538ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:12,947 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4,260ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:12,949 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4,260ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:12,953 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,926ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:12,956 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,921ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:12,959 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (901ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:12,981 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3,909ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:12,987 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (447ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:12,999 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNTIsImV4cCI6MTY2OTkzMjg1MiwiaWF0IjoxNjY5OTI5MjUyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.whVfM5Y973nxVzscGaTZ7_G5D5665HhL-2_eL0yNqzg
2022-12-01 16:14:13,006 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 0VblkBvxdg56k7Zh6pxxiPFVPY4703KCv5CGn4GgFDo=
2022-12-01 16:14:13,382 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (412ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:13,386 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (417ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:13,399 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (426ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:13,389 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (421ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:13,393 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (417ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:13,402 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (387ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:13,433 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:13,917 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (518ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:14,105 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (546ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:14:14,338 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (411ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:14,689 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,275ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:14,697 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (746ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:14,768 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX12741: JWT: 'System.String' must have three segments (JWS) or five segments (JWE).    at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:14:14,795 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:15,174 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,150ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:15,182 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:15,342 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (349ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:15,541 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,595ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:15,688 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:15,707 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (358ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:16,031 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,045ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:16,035 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:16,659 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,676ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:16,745 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:17,146 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2,344ms) [Parameters=[@__refreshTokenRequest_RefreshToken_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[RefreshToken] = @__refreshTokenRequest_RefreshToken_0
2022-12-01 16:14:17,246 [.NET ThreadPool Worker] WARN JLR.GP.Orders.Domain.Services.AuthService - GetRefreshToken : Invalid access token or refresh token XfYqcSihk+U1NbsD2xLS+BNkgAv/IO1SLF9p+WwbfyI=
2022-12-01 16:14:17,252 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:19,167 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:19,171 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:19,176 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:19,184 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NDMsIm5iZiI6MTY2OTkyODk0MywiZXhwIjoxNjY5OTMyODQzLCJhaW8iOiJBVFFBeS84VEFBQUFsbi9KNzVvWjVFY0ppZTdvbmF5WG1xR3B4blp2MThzSmkxczdkMzhiMXVBMnc3MnNITExHVDB6bW8vcHdrRkVkIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiOGNkNDBlNDUtZWU2NC00YmY4LWI0NWMtODY0MGU0NWI1YjBhIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiJ3TGI3SERLb3NrZWVpWlBOeGtvOUFnIiwidmVyIjoiMi4wIn0.eEnsTzzlxZldQByWRMzsxWIhP_jPCdAHjzogzCbeoh3TvJuMc44IceWyhEhMY1IcOtU7ZV1kasbhRSkVsM_rVMFLGZ3z_7O0hELtJZV3aiqkRIZOyB6D3xzAJnHBPmKlAii8B-I9EdVtjl33OtDehJYDnDtFI7dpGFlN1c-7DchSvdYZ_W2o0vflIrZ6KlcVWnGLgVuEaUNLHM0YVyIbT2x3YUREPu7FA0HOoDHLximnUK54PTFZN6aOVdQWeRb22ro6rODUaxGe8t1_d05HQpN71-kv87ig4v6vFZsDTa-NtyoAuk2S3Qwyvw_R3A0eaxirvCZyT5iNEKudUFPwrw
2022-12-01 16:14:20,351 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:20,355 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:20,464 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:20,468 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:20,693 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:20,699 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:20,707 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NTgsIm5iZiI6MTY2OTkyODk1OCwiZXhwIjoxNjY5OTMyODU4LCJhaW8iOiJBVFFBeS84VEFBQUFTVzhDaTdhRXRTdHFwd3NWSnNHYjBwc21VMWZheTNTWFRYZUJVdFRPUTZhNFFCQVZLYU5ad1pQZE9PRFROUTlXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiZmRmYTYwZTMtMzUzZS00MTkyLWI5M2UtYTQ3ZmZkNWVjMzRjIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI4OXVibm9OMUZFTzhWZGNMSFk2ZkFnIiwidmVyIjoiMi4wIn0.riqik8muMIbKMhfNP8ccicBuj7l3KCobxvSbzpNIPKp3oIQmS7b6gdYM9Qdi3gRLOoKRWdsb9SxAcculkNtLFFffhrJm3_Lo-_O9CpKjH1MLo-L7yePcnCyXfWj5gXTzxSogBKTXQAvt95MU5k5sqFfYkOVarodXqbYUgmmDwvNsrbTfV1iniyTVj1HxXP2CnH2f5xyWjKv47-CH2OUMVHSaag54XlDCMOX0-brQOBW6CWHRnPNifCLuZqYoE4H331m17y05kauSFTFEShQP00G0KJB6f_rTat1bYqTReb6_siC_b13jw7_Ft1mzyBbudf-af4nwnJBqLRImK0aycQ
2022-12-01 16:14:20,715 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NTgsIm5iZiI6MTY2OTkyODk1OCwiZXhwIjoxNjY5OTMyODU4LCJhaW8iOiJBVFFBeS84VEFBQUFTVzhDaTdhRXRTdHFwd3NWSnNHYjBwc21VMWZheTNTWFRYZUJVdFRPUTZhNFFCQVZLYU5ad1pQZE9PRFROUTlXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiZmRmYTYwZTMtMzUzZS00MTkyLWI5M2UtYTQ3ZmZkNWVjMzRjIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI4OXVibm9OMUZFTzhWZGNMSFk2ZkFnIiwidmVyIjoiMi4wIn0.riqik8muMIbKMhfNP8ccicBuj7l3KCobxvSbzpNIPKp3oIQmS7b6gdYM9Qdi3gRLOoKRWdsb9SxAcculkNtLFFffhrJm3_Lo-_O9CpKjH1MLo-L7yePcnCyXfWj5gXTzxSogBKTXQAvt95MU5k5sqFfYkOVarodXqbYUgmmDwvNsrbTfV1iniyTVj1HxXP2CnH2f5xyWjKv47-CH2OUMVHSaag54XlDCMOX0-brQOBW6CWHRnPNifCLuZqYoE4H331m17y05kauSFTFEShQP00G0KJB6f_rTat1bYqTReb6_siC_b13jw7_Ft1mzyBbudf-af4nwnJBqLRImK0aycQ
2022-12-01 16:14:21,021 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (660ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:21,041 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjEsImV4cCI6MTY2OTkzMjg2MSwiaWF0IjoxNjY5OTI5MjYxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.Nq1Ou_Ft3iEWY1sZRBMRc_TbEVe9S46r-wULTtvuOXQ
2022-12-01 16:14:21,056 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: Mw1rxfcZHmH6giyTxgiy9tYmWGUU2k6kM2J8i8jayPw=
2022-12-01 16:14:21,170 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:21,248 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (687ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:21,251 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NTgsIm5iZiI6MTY2OTkyODk1OCwiZXhwIjoxNjY5OTMyODU4LCJhaW8iOiJBVFFBeS84VEFBQUFTVzhDaTdhRXRTdHFwd3NWSnNHYjBwc21VMWZheTNTWFRYZUJVdFRPUTZhNFFCQVZLYU5ad1pQZE9PRFROUTlXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiZmRmYTYwZTMtMzUzZS00MTkyLWI5M2UtYTQ3ZmZkNWVjMzRjIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI4OXVibm9OMUZFTzhWZGNMSFk2ZkFnIiwidmVyIjoiMi4wIn0.riqik8muMIbKMhfNP8ccicBuj7l3KCobxvSbzpNIPKp3oIQmS7b6gdYM9Qdi3gRLOoKRWdsb9SxAcculkNtLFFffhrJm3_Lo-_O9CpKjH1MLo-L7yePcnCyXfWj5gXTzxSogBKTXQAvt95MU5k5sqFfYkOVarodXqbYUgmmDwvNsrbTfV1iniyTVj1HxXP2CnH2f5xyWjKv47-CH2OUMVHSaag54XlDCMOX0-brQOBW6CWHRnPNifCLuZqYoE4H331m17y05kauSFTFEShQP00G0KJB6f_rTat1bYqTReb6_siC_b13jw7_Ft1mzyBbudf-af4nwnJBqLRImK0aycQ
2022-12-01 16:14:21,260 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.Jwt - ValidateToken error: IDX12741: JWT: 'System.String' must have three segments (JWS) or five segments (JWE).    at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at JLR.GP.Orders.Domain.Services.Jwt.ValidateToken(String authorization) in F:\NET CORE\PUBLIC\V2\JLR.GP.Orders\JLR.GP.Orders\Domain\Services\Jwt.cs:line 96
2022-12-01 16:14:21,264 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjEsImV4cCI6MTY2OTkzMjg2MSwiaWF0IjoxNjY5OTI5MjYxLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.Nq1Ou_Ft3iEWY1sZRBMRc_TbEVe9S46r-wULTtvuOXQ
2022-12-01 16:14:21,276 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 0dzTuCK7ntl4oYCAHQVltJjsOroKhH64PVJHvzNzKOg=
2022-12-01 16:14:21,281 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:21,285 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NTgsIm5iZiI6MTY2OTkyODk1OCwiZXhwIjoxNjY5OTMyODU4LCJhaW8iOiJBVFFBeS84VEFBQUFTVzhDaTdhRXRTdHFwd3NWSnNHYjBwc21VMWZheTNTWFRYZUJVdFRPUTZhNFFCQVZLYU5ad1pQZE9PRFROUTlXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiZmRmYTYwZTMtMzUzZS00MTkyLWI5M2UtYTQ3ZmZkNWVjMzRjIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI4OXVibm9OMUZFTzhWZGNMSFk2ZkFnIiwidmVyIjoiMi4wIn0.riqik8muMIbKMhfNP8ccicBuj7l3KCobxvSbzpNIPKp3oIQmS7b6gdYM9Qdi3gRLOoKRWdsb9SxAcculkNtLFFffhrJm3_Lo-_O9CpKjH1MLo-L7yePcnCyXfWj5gXTzxSogBKTXQAvt95MU5k5sqFfYkOVarodXqbYUgmmDwvNsrbTfV1iniyTVj1HxXP2CnH2f5xyWjKv47-CH2OUMVHSaag54XlDCMOX0-brQOBW6CWHRnPNifCLuZqYoE4H331m17y05kauSFTFEShQP00G0KJB6f_rTat1bYqTReb6_siC_b13jw7_Ft1mzyBbudf-af4nwnJBqLRImK0aycQ
2022-12-01 16:14:21,676 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (616ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:21,797 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (514ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:22,057 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (377ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:22,098 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:22,102 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:22,135 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:22,139 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:22,184 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (382ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:22,356 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:22,363 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:22,402 [6] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:22,406 [6] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:22,464 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (356ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:22,473 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjIsImV4cCI6MTY2OTkzMjg2MiwiaWF0IjoxNjY5OTI5MjYyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.w_v61idYZHS8T4tq_kB3np2sqwSJDTkVkwdDx1aB09s
2022-12-01 16:14:22,480 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (333ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:22,482 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: UOdARTEYfGKzra20qZWeGIBPx6IwpUuzpty0tKJywrc=
2022-12-01 16:14:22,492 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjIsImV4cCI6MTY2OTkzMjg2MiwiaWF0IjoxNjY5OTI5MjYyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.w_v61idYZHS8T4tq_kB3np2sqwSJDTkVkwdDx1aB09s
2022-12-01 16:14:22,498 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: vxPHHG3D8OHYk+mF+ioGbGADdKS1DD3ge/msFw6vUsk=
2022-12-01 16:14:22,639 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (271ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:22,649 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjIsImV4cCI6MTY2OTkzMjg2MiwiaWF0IjoxNjY5OTI5MjYyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.w_v61idYZHS8T4tq_kB3np2sqwSJDTkVkwdDx1aB09s
2022-12-01 16:14:22,654 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: 91MPMfiYOwXVvzk7Nl9TwiQ2d74O+Z+XCb3DY5Lr+50=
2022-12-01 16:14:22,699 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (289ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:22,706 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (277ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:22,709 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjIsImV4cCI6MTY2OTkzMjg2MiwiaWF0IjoxNjY5OTI5MjYyLCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0.w_v61idYZHS8T4tq_kB3np2sqwSJDTkVkwdDx1aB09s
2022-12-01 16:14:22,716 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: WiOMl2Zz37Fa7TlXN1Oid3QsJvbq5ImxT6Wy3x7zyME=
2022-12-01 16:14:22,945 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (229ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:23,107 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (599ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:23,113 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (605ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:23,122 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Application.Controllers.AuthController - Controller GetToken started
2022-12-01 16:14:23,126 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken started: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJjMWYzZTUyMy01ZDFiLTQzNzQtYThjOS1lNjZkZTU4Y2JmOTciLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vZDlkZDJkOGItYTAzMi00ZWY1LTg4NWYtZjllN2ZhNjc4OTU2L3YyLjAiLCJpYXQiOjE2Njk5Mjg5NTgsIm5iZiI6MTY2OTkyODk1OCwiZXhwIjoxNjY5OTMyODU4LCJhaW8iOiJBVFFBeS84VEFBQUFTVzhDaTdhRXRTdHFwd3NWSnNHYjBwc21VMWZheTNTWFRYZUJVdFRPUTZhNFFCQVZLYU5ad1pQZE9PRFROUTlXIiwibmFtZSI6IlJQQSIsIm5vbmNlIjoiZmRmYTYwZTMtMzUzZS00MTkyLWI5M2UtYTQ3ZmZkNWVjMzRjIiwib2lkIjoiNWEzNzczOTctNTU4MS00NTY0LWE3MTktNjBlNzgwMmJjZjRmIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicnBhQGdydXBvcGFuYS5jb20ucGUiLCJyaCI6IjAuQVNVQWl5M2QyVEtnOVU2SVhfbm4tbWVKVmlQbDg4RWJYWFJEcU1ubWJlV012NWNsQUdBLiIsInN1YiI6Im02MW5HZEp6ZlhLd3ZZYUNRNmNwdS1WOEl5SEM5bGJCS1JWWEdlc0xXUGciLCJ0aWQiOiJkOWRkMmQ4Yi1hMDMyLTRlZjUtODg1Zi1mOWU3ZmE2Nzg5NTYiLCJ1dGkiOiI4OXVibm9OMUZFTzhWZGNMSFk2ZkFnIiwidmVyIjoiMi4wIn0.riqik8muMIbKMhfNP8ccicBuj7l3KCobxvSbzpNIPKp3oIQmS7b6gdYM9Qdi3gRLOoKRWdsb9SxAcculkNtLFFffhrJm3_Lo-_O9CpKjH1MLo-L7yePcnCyXfWj5gXTzxSogBKTXQAvt95MU5k5sqFfYkOVarodXqbYUgmmDwvNsrbTfV1iniyTVj1HxXP2CnH2f5xyWjKv47-CH2OUMVHSaag54XlDCMOX0-brQOBW6CWHRnPNifCLuZqYoE4H331m17y05kauSFTFEShQP00G0KJB6f_rTat1bYqTReb6_siC_b13jw7_Ft1mzyBbudf-af4nwnJBqLRImK0aycQ
2022-12-01 16:14:23,274 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (615ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:23,277 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (781ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:23,285 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (160ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:23,282 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (559ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:23,410 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:23,451 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (165ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:23,470 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (175ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:23,536 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (185ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:23,715 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (167ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:23,780 [7] WARN JLR.GP.Orders.Domain.Services.AuthService - GetToken preferred_username: rpa@grupopana.com.pe
2022-12-01 16:14:23,790 [7] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:23,930 [.NET ThreadPool Worker] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (34,122ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:23,935 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (216ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:23,985 [.NET ThreadPool Worker] ERROR Microsoft.EntityFrameworkCore.Query - An exception occurred while iterating over the results of a query for context type 'JLR.GP.Orders.Domain.Models.JlrGpOrdersContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - Se agotó el tiempo de espera del semáforo.)
 ---> System.ComponentModel.Win32Exception (258): Tiempo de espera de la operación de espera agotado.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:3b74ae11-3304-46db-a5b6-4c0eccde7a60
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - Se agotó el tiempo de espera del semáforo.)
 ---> System.ComponentModel.Win32Exception (258): Tiempo de espera de la operación de espera agotado.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:3b74ae11-3304-46db-a5b6-4c0eccde7a60
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-12-01 16:14:24,157 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (277ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Correo], [t].[Estado], [t].[FechaCreacion], [t].[FechaModificacion], [t].[UsuarioCreacion], [t].[UsuarioModificacion], [t0].[Id], [t0].[FechaCreacion], [t0].[FechaModificacion], [t0].[RolId], [t0].[UsuarioCreacion], [t0].[UsuarioId], [t0].[UsuarioModificacion], [t0].[Id0], [t0].[Nombre]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Correo], [u].[Estado], [u].[FechaCreacion], [u].[FechaModificacion], [u].[UsuarioCreacion], [u].[UsuarioModificacion]
    FROM [Usuario] AS [u]
    WHERE [u].[Correo] = @__correo_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[FechaCreacion], [r].[FechaModificacion], [r].[RolId], [r].[UsuarioCreacion], [r].[UsuarioId], [r].[UsuarioModificacion], [r0].[Id] AS [Id0], [r0].[Nombre]
    FROM [RolUsuario] AS [r]
    INNER JOIN [Rol] AS [r0] ON [r].[RolId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UsuarioId]
ORDER BY [t].[Id], [t0].[Id]
2022-12-01 16:14:24,187 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InJwYUBncnVwb3BhbmEuY29tLnBlIiwidXNlck5hbWUiOiJycGFAZ3J1cG9wYW5hLmNvbS5wZSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sIjoiMSIsImh0dHA6Ly9qbHIuZ3Aub3JkZXJzLmNvbS9jbGFpbXMvcm9sbmFtZSI6IkFkbWluaXN0cmFkb3IiLCJuYmYiOjE2Njk5MjkyNjQsImV4cCI6MTY2OTkzMjg2NCwiaWF0IjoxNjY5OTI5MjY0LCJpc3MiOiJodHRwOi8vamxyLmdwLm9yZGVycy5pc3N1ZXIuY29tIiwiYXVkIjoiaHR0cDovL2psci5ncC5vcmRlcnMuY29tIn0._LtCG-AjPnJG1i57PWlDrbGXbNCWNUy8hPdFqGWxLKc
2022-12-01 16:14:24,199 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (560ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:24,217 [.NET ThreadPool Worker] INFO JLR.GP.Orders.Domain.Services.AuthService - GetToken refreshToken: IU0mLaju7lZyxX2FWCpYYPcyZC/4On/F279LAwCbeK4=
2022-12-01 16:14:24,240 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"System.InvalidOperationException","Message":"An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.","Data":null,"InnerException":{"ClassName":"Microsoft.Data.SqlClient.SqlException","Message":"Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\r\nA transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - Se agotó el tiempo de espera del semáforo.)","Data":{"HelpLink.ProdName":"Microsoft SQL Server","HelpLink.EvtSrc":"MSSQLServer","HelpLink.EvtID":"-2","HelpLink.BaseHelpUrl":"https://go.microsoft.com/fwlink","HelpLink.LinkId":"20476","SqlError 1":"Microsoft.Data.SqlClient.SqlError: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.","SqlError 2":"Microsoft.Data.SqlClient.SqlError: A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - Se agotó el tiempo de espera del semáforo.)"},"InnerException":{"ClassName":"System.ComponentModel.Win32Exception","Message":"Tiempo de espera de la operación de espera agotado.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":null,"RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2147467259,"Source":null,"WatsonBuckets":null,"NativeErrorCode":258},"HelpURL":null,"StackTraceString":"   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146232060,"Source":"Core Microsoft SqlClient Data Provider","WatsonBuckets":null,"Errors":null,"ClientConnectionId":"3b74ae11-3304-46db-a5b6-4c0eccde7a60"},"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 52","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233079,"Source":"Microsoft.EntityFrameworkCore.SqlServer","WatsonBuckets":null}
2022-12-01 16:14:24,680 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (986ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:24,686 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:25,141 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,328ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:25,154 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:25,432 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1,190ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TokenSecurity] AS [t]
        WHERE [t].[UsuarioCreacion] = @__correo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-12-01 16:14:25,532 [.NET ThreadPool Worker] ERROR JLR.GP.Orders.Domain.Services.AuthService - GetToken Error try catch: {"ClassName":"Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException","Message":"The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.","Data":null,"InnerException":null,"HelpURL":null,"StackTraceString":"   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at JLR.GP.Orders.Domain.Services.AuthService.GetToken(String tokenAD) in F:\\NET CORE\\PUBLIC\\V2\\JLR.GP.Orders\\JLR.GP.Orders\\Domain\\Services\\AuthService.cs:line 104","RemoteStackTraceString":null,"RemoteStackIndex":0,"ExceptionMethod":null,"HResult":-2146233088,"Source":"Microsoft.EntityFrameworkCore.Relational","WatsonBuckets":null}
2022-12-01 16:14:25,652 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (214ms) [Parameters=[@__correo_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[FechaCreacion], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UsuarioCreacion]
FROM [TokenSecurity] AS [t]
WHERE [t].[UsuarioCreacion] = @__correo_0
2022-12-01 16:14:26,267 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (293ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TokenSecurity]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-12-01 16:14:26,579 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (306ms) [Parameters=[@p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [TokenSecurity] ([FechaCreacion], [RefreshToken], [RefreshTokenExpiryTime], [UsuarioCreacion])
VALUES (@p1, @p2, @p3, @p4);
SELECT [Id]
FROM [TokenSecurity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-12-01 16:14:26,639 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:26,945 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (300ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:14:29,693 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:14:30,039 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (338ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:14:30,519 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (331ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:14:30,952 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (308ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:19:11,201 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:19:11,536 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (329ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:19:11,825 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (282ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:19:12,025 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (192ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:19:29,704 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:19:29,872 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (163ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:19:30,074 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (197ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:19:30,237 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (156ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:24:11,297 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:24:12,505 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (207ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:24:12,705 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (190ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:24:12,899 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (183ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:24:29,727 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:24:29,948 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (211ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:24:30,160 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (193ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:24:30,375 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (202ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:29:11,276 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:29:11,464 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (183ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:29:11,669 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (198ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:29:11,876 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (198ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:29:29,731 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:29:29,911 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (176ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:29:30,105 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (188ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:29:30,296 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (184ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:34:11,320 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:34:11,538 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (212ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:34:11,741 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (192ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:34:11,939 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (187ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:34:29,772 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:34:29,962 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (185ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:34:30,155 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (183ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:34:30,364 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (186ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:39:11,338 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:39:12,318 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (213ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:39:12,654 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (324ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:39:12,958 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (284ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:39:29,769 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Infrastructure - Entity Framework Core 6.0.3 initialized 'JlrGpOrdersContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-12-01 16:39:29,959 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (177ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s].[NumeroDocumentoSap], [s].[CentroDeCosto], [s].[Cerrado], [s].[DocStatus], [s].[FechaCreacion], [s].[FechaDeSolicitud], [s].[FechaModificacion], [s].[IdDocumento], [s].[NroAvisoTdp], [s].[NroPlaca], [s].[Procedencia], [s].[Solicitante], [s].[Tienda], [s].[Tienda2], [s].[Tipo], [s].[TipoDeCompra], [s].[TipoDeCompraDes], [s].[UnidadNegocio], [s].[UsuarioCreacion], [s].[UsuarioModificacion]
FROM [Solicitud] AS [s]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap]
2022-12-01 16:39:30,159 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (188ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Accion], [a].[AccionRPA], [a].[Cantidad], [a].[CodPedido], [a].[CodPedidoA], [a].[CodPedidoM], [a].[CodTraslado], [a].[CodigoAlmacen], [a].[CodigoArticulo], [a].[Concesionario], [a].[Descripcion], [a].[DescripcionArticulo], [a].[ErrSinStock], [a].[ErrTraslado], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaPedido], [a].[Icc], [a].[NumPedido], [a].[NumPedidoA], [a].[NumPedidoM], [a].[NumPedidoMasivo], [a].[NumeroDocumentoSap], [a].[Observacion], [a].[SaldoPedido], [a].[StockProcesado], [a].[SubAccionRPA], [a].[UsuarioCreacion], [a].[UsuarioModificacion], [s].[NumeroDocumentoSap]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
2022-12-01 16:39:30,342 [.NET ThreadPool Worker] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (172ms) [Parameters=[@__solicitudSearchRequest_FechaDeSolicitudInicio_0='?' (DbType = DateTime2), @__solicitudSearchRequest_FechaDeSolicitudFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT [s0].[Id], [s0].[ArticuloSolicitudId], [s0].[CodigoAlmacen], [s0].[EnStock], [s0].[FechaCreacion], [s0].[FechaModificacion], [s0].[NombreAlmacen], [s0].[Selected], [s0].[UsuarioCreacion], [s0].[UsuarioModificacion], [s].[NumeroDocumentoSap], [a].[Id]
FROM [Solicitud] AS [s]
INNER JOIN [ArticuloSolicitud] AS [a] ON [s].[NumeroDocumentoSap] = [a].[NumeroDocumentoSap]
INNER JOIN [StockArticuloSolicitud] AS [s0] ON [a].[Id] = [s0].[ArticuloSolicitudId]
WHERE ([s].[FechaDeSolicitud] >= @__solicitudSearchRequest_FechaDeSolicitudInicio_0) AND ([s].[FechaDeSolicitud] <= @__solicitudSearchRequest_FechaDeSolicitudFin_1)
ORDER BY [s].[FechaCreacion] DESC, [s].[NumeroDocumentoSap], [a].[Id]
